<table id="dg" class="easyui-datagrid" title="users list"
	style="width: auto; height: 335px"
	data-options="
			rownumbers:true,
			singleSelect:true,
			pagination:true,
			url:'/Auth/userlist?sort=username&order=asc',
			method:'get',
			idField:'id',
			rowStyler:rowStatus,
			toolbar:'#tb'">
	<!-- dg_toolbar //backend.js-->
	<thead>
		<tr>
			<th data-options="field:'username',width:100">User ID</th>
			<th data-options="field:'first_name',width:100">First Name</th>
			<th data-options="field:'last_name',width:300">Last Name</th>
			<th data-options="field:'age',width:150">Age</th>
			<th data-options="field:'email',width:150">E-mail</th>
			<th
				data-options="field:'status',width:80,align:'center',formatter:formatStatus">Status</th>
		</tr>
	</thead>
</table>

<!-- tool bar-->
<div id="tb" style="padding: 2px 5px;">
	<a href="javascript:void(0)" class="easyui-linkbutton"
		data-options="iconCls:'icon-add', plain:true">Add</a> <a
		href="javascript:void(0)" class="easyui-linkbutton"
		data-options="iconCls:'icon-edit', plain:true">Edit</a> <a
		href="javascript:void(0)" class="easyui-linkbutton"
		data-options="iconCls:'icon-remove', plain:true">Remove</a>
	<div style="float: right">
		<input id="role" class="easyui-combobox" name="role"
			data-options="
	                    valueField: 'id',
	                    textField: 'roleName',
	                    label:'Select Role',
	                    labelAlign: 'right',
	                    method: 'get',
	                    width: 250,
	                    url:'/Auth/listrolename',
	                    panelHeight:150"></input>
		<input id="username" class="easyui-textbox" name="username"
			data-options="
						buttonText:'Search',
						buttonIcon:'icon-search',
						label:'Username',
						labelAlign: 'right',
						prompt:'User ID...',
						width:320,
						onClickButton:search"></input>
	</div>
</div>

<!-- edit window
<div id="editw" class="easyui-dialog" style="padding:10px"
		data-options="
			width:416,
			height:215,
			modal:true,
			closed:true,
			buttons:ew_buttons">
	<form id="fm" method="post">
		<table class="" align="center" valign="middle" cellspacing="0px">
			<tr>
				<th class="tRight">xxxx</th>
				<td>
					<input id="version" name="version" type="text" style="width:170px" />
				</td>
				<th class="tRight">xxx</th>
				<td  class="tRight">
					<select id="status" name="status" style="width:80pt;">
						<option value ="1">xxx</option>
						<option value ="0">xxx</option>
					</select>
				</td>
			</tr>			
			<tr>
				<th class="tRight">xxx</th>
				<td colspan="3">
					<textarea id="descript" name="descript" rows="5" cols="50"></textarea>
				</td>
			</tr>
		</table>
	</form>
</div>-->

<script type="text/javascript">
	function test() {
		alert($('#username').textbox('getValue'));
	}
	
	function formatStatus(value, row, index) {
		ret = '<input class="easyui-switchbutton" ';
		ret += 'data-options="width:50, height: 22, ';
		ret += 'onChange:function(checked){reverseStatus(' + row.id + ');}"';
		switch (value) {
		case 1:
			//return 	'<span style="color:green;"><a herf="javascript:void(0)" onclick="switchStatus('+row.id+')">(Ok)</a></span>';
			return ret + ' checked>';
			break;
		case 0:
			//return 	'<span style="color:red;"><a herf="javascript:void(0)" onclick="switchStatus('+row.id+')">(Stop)</a></span>';
			return ret + '>';
			break;
		default:
			return value;
		}
	}

	function search(){
		var query = {
				role: $('#role').combobox('getValue'),
				username : $('#username').textbox('getValue')
			};
		$("#dg").datagrid('load',query);			
	}
	
	$(function() {

		// dynamic bind datagrid
		$('#dg').datagrid({
			onLoadSuccess : function() {
				// Get this datagrid's panel object
				$(this).datagrid('getPanel')
				// for all easyui-linkbutton <a>'s make them a linkbutton
				.find('input.easyui-switchbutton').switchbutton();
			},
			onLoadError :function(XMLHttpRequest){
				console.log(XMLHttpRequest);
				ajaxerror(XMLHttpRequest.responseJSON);
			}
		});

		// dynamic bind edit window--
		//$('#editw').dialog();
	});
</script>